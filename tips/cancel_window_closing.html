<!DOCTYPE html>
<html lang='ja'>
<head>
<meta charset="UTF-8">
<link rel='stylesheet' type='text/css' href='../dxruby-code-highlight.css' />
<link rel='stylesheet' type='text/css' href='../dxruby.css' />
<title>'ウィンドウを閉じる'のキャンセル</title>
</head>
<body>
<header>DXRuby 1.4.6 <span class="title">Reference Manual</span></header>
<section id="document">
<section id="content">
<a href='../index.html'>TOPへ戻る</a>
<h1>&#39;ウィンドウを閉じる&#39;のキャンセル</h1>

<p>DXRuby1.4.2からWindow.loopの引数にclose_cancel(初期値false)が追加され、trueを指定するとユーザの閉じる操作で閉じられなくできるようになりました。<br>
この機能とInput.requested_close?を使うと閉じる操作の確認を以前より簡単に実現することができます。</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'dxruby'</span>

<span class="n">flg</span> <span class="o">=</span> <span class="kp">false</span>
<span class="no">Window</span><span class="p">.</span><span class="nf">loop</span><span class="p">(</span><span class="kp">true</span><span class="p">)</span> <span class="k">do</span>
  <span class="k">if</span> <span class="no">Input</span><span class="p">.</span><span class="nf">requested_close?</span>
    <span class="n">flg</span> <span class="o">=</span> <span class="kp">true</span>
  <span class="k">end</span>

  <span class="k">if</span> <span class="n">flg</span>
    <span class="no">Window</span><span class="p">.</span><span class="nf">draw_font</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">"閉じる？(y/n)"</span><span class="p">,</span> <span class="no">Font</span><span class="p">.</span><span class="nf">default</span><span class="p">)</span>
    <span class="k">if</span> <span class="no">Input</span><span class="p">.</span><span class="nf">key_push?</span><span class="p">(</span><span class="no">K_Y</span><span class="p">)</span>
      <span class="no">Window</span><span class="p">.</span><span class="nf">close</span>
    <span class="k">elsif</span> <span class="no">Input</span><span class="p">.</span><span class="nf">key_push?</span><span class="p">(</span><span class="no">K_N</span><span class="p">)</span>
      <span class="n">flg</span> <span class="o">=</span> <span class="kp">false</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<a href='../index.html'>TOPへ戻る</a>
</section>
</section>

<footer>&copy; 2009-2019 mirichi</footer>
</body>
</html>